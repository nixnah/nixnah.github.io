<!doctype html><html lang=zh-cn><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=utf-8><meta name=generator content="Hugo 0.91.2"><meta name=theme-color content="#16171d"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><title>42.æ·±å…¥æ¨¡å‹ | Hanxin</title><link rel=stylesheet href=/css/meme.min.88c90dc75021618344ec926f4ed6ac307f30ba48911294816b16370a41e5f137.css><script src=/js/meme.min.f460a174bb100a60a7e275913695161f1e09aab1378fe99cfd30cde14da70888.js></script>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Satisfy&family=Klee+One:wght@400;600&family=Great+Vibes&display=swap" media=print onload="this.media='all'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&family=Noto+Serif+SC:wght@400;500;700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Satisfy&family=Klee+One:wght@400;600&family=Great+Vibes&display=swap"></noscript><meta name=author content="éª†æ˜Š"><meta name=description content="æ·±å…¥æ¨¡å‹ åœ¨ä¸Šä¸€ä¸ªç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†Djangoæ˜¯åŸºäºMVCæ¶æ„çš„Webæ¡†æ¶ï¼ŒMVCæ¶â€¦â€¦"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="Hanxin"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="Hanxin"><meta name=msapplication-starturl content="../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=/python/42.%E6%B7%B1%E5%85%A5%E6%A8%A1%E5%9E%8B/><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebPage","datePublished":"2021-08-23T17:34:42+08:00","dateModified":"2022-01-16T09:24:35+00:00","url":"/python/42.%E6%B7%B1%E5%85%A5%E6%A8%A1%E5%9E%8B/","name":"42.æ·±å…¥æ¨¡å‹","description":"æ·±å…¥æ¨¡å‹ åœ¨ä¸Šä¸€ä¸ªç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†Djangoæ˜¯åŸºäºMVCæ¶æ„çš„Webæ¡†æ¶ï¼ŒMVCæ¶â€¦â€¦","image":"/icons/apple-touch-icon.png","license":"æœ¬æ–‡é‡‡ç”¨[ã€ŒCC BY-NC-SA 4.0ã€](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","publisher":{"@type":"Organization","name":"Hanxin","logo":{"@type":"ImageObject","url":"/icons/apple-touch-icon.png"},"url":"/"},"mainEntityOfPage":{"@type":"WebSite","@id":"/"}}</script><meta name=twitter:card content="summary"><meta property="og:title" content="42.æ·±å…¥æ¨¡å‹"><meta property="og:description" content="æ·±å…¥æ¨¡å‹ åœ¨ä¸Šä¸€ä¸ªç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†Djangoæ˜¯åŸºäºMVCæ¶æ„çš„Webæ¡†æ¶ï¼ŒMVCæ¶â€¦â€¦"><meta property="og:url" content="/python/42.%E6%B7%B1%E5%85%A5%E6%A8%A1%E5%9E%8B/"><meta property="og:site_name" content="Hanxin"><meta property="og:locale" content="zh"><meta property="og:image" content="/icons/apple-touch-icon.png"><meta property="og:type" content="website"></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>Hanxin</a></div><nav class=nav><ul class=menu id=menu><li class=menu-item><a href=/life/><span class=menu-item-name>ç”Ÿæ´»</span></a></li><li class=menu-item><a href=/tech/><span class=menu-item-name>æŠ€æœ¯</span></a></li><li class=menu-item><a href=/tags/><span class=menu-item-name>æ ‡ç­¾</span></a></li><li class=menu-item><a href=/about/><span class=menu-item-name>å…³äº</span></a></li><li class=menu-item><a href=/blogroll/><span class=menu-item-name>å‹é“¾</span></a></li><li class=menu-item><a href=/python/><span class=menu-item-name>Python-100å¤©</span></a></li><li class=menu-item><a id=theme-switcher href=#><span class="icon theme-icon-light">ğŸŒ</span><span class="icon theme-icon-dark">ğŸŒ™</span></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label>
<label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=python data-toc-num=true><h1 class="post-title p-name">42.æ·±å…¥æ¨¡å‹</h1><div class=post-meta><time datetime=2021-08-23T17:34:42+08:00 class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;2021.8.23</time>
<time datetime=2022-01-16T09:24:35+00:00 class="post-meta-item modified dt-updated"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M4e2 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627.0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627.0-12 5.373-12 12v52H48C21.49 64 0 85.49.0 112v352c0 26.51 21.49 48 48 48h352c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 4e2H54a6 6 0 01-6-6V160h352v298a6 6 0 01-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;2022.1.16</time>
<span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3.0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9.0l60.1 60.1c18.8 18.7 18.8 49.1.0 67.9zM284.2 99.8 21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3.0-17l-111-111c-4.8-4.7-12.4-4.7-17.1.0zM124.1 339.9c-5.5-5.5-5.5-14.3.0-19.8l154-154c5.5-5.5 14.3-5.5 19.8.0s5.5 14.3.0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8.0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;8772</span>
<span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;18&nbsp;åˆ†é’Ÿ</span></div><div class="post-body e-content"><h2 id=æ·±å…¥æ¨¡å‹><a href=#æ·±å…¥æ¨¡å‹ class=anchor-link>#</a>æ·±å…¥æ¨¡å‹</h2><p>åœ¨ä¸Šä¸€ä¸ªç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†Djangoæ˜¯åŸºäºMVCæ¶æ„çš„Webæ¡†æ¶ï¼ŒMVCæ¶æ„è¿½æ±‚çš„æ˜¯â€œæ¨¡å‹â€å’Œâ€œè§†å›¾â€çš„è§£è€¦åˆã€‚æ‰€è°“â€œæ¨¡å‹â€è¯´å¾—æ›´ç›´ç™½ä¸€äº›å°±æ˜¯æ•°æ®ï¼ˆçš„è¡¨ç¤ºï¼‰ï¼Œæ‰€ä»¥é€šå¸¸ä¹Ÿè¢«ç§°ä½œâ€œæ•°æ®æ¨¡å‹â€ã€‚åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œæ•°æ®æ¨¡å‹é€šå¸¸é€šè¿‡æ•°æ®åº“å®ç°æŒä¹…åŒ–æ“ä½œï¼Œè€Œå…³ç³»å‹æ•°æ®åº“åœ¨è¿‡å»å’Œå½“ä¸‹éƒ½æ˜¯æŒä¹…åŒ–çš„é¦–é€‰æ–¹æ¡ˆï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡å®Œæˆä¸€ä¸ªæŠ•ç¥¨é¡¹ç›®æ¥è®²è§£å’Œæ¨¡å‹ç›¸å…³çš„çŸ¥è¯†ç‚¹ã€‚æŠ•ç¥¨é¡¹ç›®çš„é¦–é¡µä¼šå±•ç¤ºæŸåœ¨çº¿æ•™è‚²å¹³å°æ‰€æœ‰çš„å­¦ç§‘ï¼›ç‚¹å‡»å­¦ç§‘å¯ä»¥æŸ¥çœ‹åˆ°è¯¥å­¦ç§‘çš„è€å¸ˆåŠå…¶ä¿¡æ¯ï¼›ç”¨æˆ·ç™»å½•ååœ¨æŸ¥çœ‹è€å¸ˆçš„é¡µé¢ä¸ºè€å¸ˆæŠ•ç¥¨ï¼Œå¯ä»¥æŠ•èµæˆç¥¨å’Œåå¯¹ç¥¨ï¼›æœªç™»å½•çš„ç”¨æˆ·å¯ä»¥é€šè¿‡ç™»å½•é¡µè¿›è¡Œç™»å½•ï¼›å°šæœªæ³¨å†Œçš„ç”¨æˆ·å¯ä»¥é€šè¿‡æ³¨å†Œé¡µè¾“å…¥ä¸ªäººä¿¡æ¯è¿›è¡Œæ³¨å†Œã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨MySQLæ•°æ®åº“æ¥å®ç°æ•°æ®æŒä¹…åŒ–æ“ä½œã€‚</p><h3 id=åˆ›å»ºé¡¹ç›®å’Œåº”ç”¨><a href=#åˆ›å»ºé¡¹ç›®å’Œåº”ç”¨ class=anchor-link>#</a>åˆ›å»ºé¡¹ç›®å’Œåº”ç”¨</h3><p>æˆ‘ä»¬é¦–å…ˆåˆ›å»ºDjangoé¡¹ç›®<code>vote</code>å¹¶ä¸ºå…¶æ·»åŠ è™šæ‹Ÿç¯å¢ƒå’Œä¾èµ–é¡¹ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨é¡¹ç›®ä¸‹åˆ›å»ºåä¸º<code>polls</code>çš„åº”ç”¨å’Œä¿å­˜æ¨¡æ¿é¡µçš„æ–‡ä»¶å¤¹<code>tempaltes</code>ï¼Œé¡¹ç›®æ–‡ä»¶å¤¹çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src=/res/pycharm-vote-project.png alt></p><p>æ ¹æ®ä¸Šé¢æè¿°çš„é¡¹ç›®éœ€æ±‚ï¼Œæˆ‘ä»¬å‡†å¤‡äº†å››ä¸ªé™æ€é¡µé¢ï¼Œåˆ†åˆ«æ˜¯å±•ç¤ºå­¦ç§‘çš„é¡µé¢<code>subjects.html</code>ï¼Œæ˜¾ç¤ºå­¦ç§‘è€å¸ˆçš„é¡µé¢<code>teachers.html</code>ï¼Œç™»å½•é¡µé¢<code>login.html</code>ï¼Œæ³¨å†Œé¡µé¢<code>register.html</code>ï¼Œç¨åæˆ‘ä»¬ä¼šå°†é™æ€é¡µä¿®æ”¹ä¸ºDjangoé¡¹ç›®æ‰€éœ€çš„æ¨¡æ¿é¡µã€‚</p><h3 id=é…ç½®å…³ç³»å‹æ•°æ®åº“mysql><a href=#é…ç½®å…³ç³»å‹æ•°æ®åº“mysql class=anchor-link>#</a>é…ç½®å…³ç³»å‹æ•°æ®åº“MySQL</h3><ol><li><p>åœ¨MySQLä¸­åˆ›å»ºæ•°æ®åº“ï¼Œåˆ›å»ºç”¨æˆ·ï¼Œæˆæƒç”¨æˆ·è®¿é—®è¯¥æ•°æ®åº“ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=n>vote</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=n>charset</span><span class=w> </span><span class=n>utf8</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>create</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=s1>&#39;hellokitty&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=n>identified</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=s1>&#39;Hellokitty.618&#39;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>grant</span><span class=w> </span><span class=k>all</span><span class=w> </span><span class=k>privileges</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>vote</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>to</span><span class=w> </span><span class=s1>&#39;hellokitty&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=n>flush</span><span class=w> </span><span class=k>privileges</span><span class=p>;</span><span class=w>
</span></code></pre></td></tr></table></div></div></div></li><li><p>åœ¨MySQLä¸­åˆ›å»ºä¿å­˜å­¦ç§‘å’Œè€å¸ˆä¿¡æ¯çš„äºŒç»´è¡¨ï¼ˆä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„è¡¨ç¨åå¤„ç†ï¼‰ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=n>use</span><span class=w> </span><span class=n>vote</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>-- åˆ›å»ºå­¦ç§‘è¡¨
</span><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=o>`</span><span class=n>tb_subject</span><span class=o>`</span><span class=w>
</span><span class=w></span><span class=p>(</span><span class=w>
</span><span class=w>	</span><span class=o>`</span><span class=k>no</span><span class=o>`</span><span class=w> </span><span class=nb>integer</span><span class=w> </span><span class=n>auto_increment</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;å­¦ç§‘ç¼–å·&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;å­¦ç§‘åç§°&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>intro</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;å­¦ç§‘ä»‹ç»&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>is_hot</span><span class=o>`</span><span class=w> </span><span class=nb>boolean</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;æ˜¯ä¸æ˜¯çƒ­é—¨å­¦ç§‘&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=k>no</span><span class=o>`</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=c1>-- åˆ›å»ºè€å¸ˆè¡¨
</span><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=o>`</span><span class=n>tb_teacher</span><span class=o>`</span><span class=w>
</span><span class=w></span><span class=p>(</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=k>no</span><span class=o>`</span><span class=w> </span><span class=nb>integer</span><span class=w> </span><span class=n>auto_increment</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;è€å¸ˆç¼–å·&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>name</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;è€å¸ˆå§“å&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>sex</span><span class=o>`</span><span class=w> </span><span class=nb>boolean</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;è€å¸ˆæ€§åˆ«&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>birth</span><span class=o>`</span><span class=w> </span><span class=nb>date</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;å‡ºç”Ÿæ—¥æœŸ&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>intro</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;è€å¸ˆä»‹ç»&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>photo</span><span class=o>`</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>255</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;è€å¸ˆç…§ç‰‡&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>gcount</span><span class=o>`</span><span class=w> </span><span class=nb>integer</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;å¥½è¯„æ•°&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>bcount</span><span class=o>`</span><span class=w> </span><span class=nb>integer</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;å·®è¯„æ•°&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=o>`</span><span class=n>sno</span><span class=o>`</span><span class=w> </span><span class=nb>integer</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;æ‰€å±å­¦ç§‘&#39;</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=k>no</span><span class=o>`</span><span class=p>),</span><span class=w>
</span><span class=w>    </span><span class=k>foreign</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=n>sno</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>references</span><span class=w> </span><span class=o>`</span><span class=n>tb_subject</span><span class=o>`</span><span class=w> </span><span class=p>(</span><span class=o>`</span><span class=k>no</span><span class=o>`</span><span class=p>)</span><span class=w>
</span><span class=w></span><span class=p>);</span><span class=w>
</span></code></pre></td></tr></table></div></div></div></li><li><p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…è¿æ¥MySQLæ•°æ®åº“æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash>pip install mysqlclient
</code></pre></td></tr></table></div></div></div><blockquote><p><strong>è¯´æ˜</strong>ï¼šå¦‚æœå› ä¸ºæŸäº›åŸå› æ— æ³•å®‰è£…<code>mysqlclient</code>ä¸‰æ–¹åº“ï¼Œå¯ä»¥ä½¿ç”¨å®ƒçš„æ›¿ä»£å“<code>pymysql</code>ï¼Œ<code>pymysql</code>æ˜¯ç”¨çº¯Pythonå¼€å‘çš„è¿æ¥MySQLçš„Pythonåº“ï¼Œå®‰è£…æ›´å®¹æ˜“æˆåŠŸï¼Œä½†æ˜¯éœ€è¦åœ¨Djangoé¡¹ç›®æ–‡ä»¶å¤¹çš„<code>__init__.py</code>ä¸­æ·»åŠ å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=kn>import</span> <span class=nn>pymysql</span>

<span class=n>pymysql</span><span class=o>.</span><span class=n>install_as_MySQLdb</span><span class=p>()</span>
</code></pre></td></tr></table></div></div></div><p>å¦‚æœä½¿ç”¨Django 2.2åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œè¿˜ä¼šé‡åˆ°PyMySQLè·ŸDjangoæ¡†æ¶çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå…¼å®¹æ€§é—®é¢˜ä¼šå¯¼è‡´é¡¹ç›®æ— æ³•è¿è¡Œï¼Œéœ€è¦æŒ‰ç…§GitHubä¸ŠPyMySQLä»“åº“<a href=https://github.com/PyMySQL/PyMySQL/issues/790 target=_blank rel=noopener>Issues</a>ä¸­æä¾›çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚æ€»ä½“æ¥è¯´ï¼Œä½¿ç”¨<code>pymysql</code>ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶é¦–é€‰å®‰è£…<code>mysqlclient</code>ã€‚</p></blockquote></li><li><p>ä¿®æ”¹é¡¹ç›®çš„settings.pyæ–‡ä»¶ï¼Œé¦–å…ˆå°†æˆ‘ä»¬åˆ›å»ºçš„åº”ç”¨<code>polls</code>æ·»åŠ å·²å®‰è£…çš„é¡¹ç›®ï¼ˆ<code>INSTALLED_APPS</code>ï¼‰ä¸­ï¼Œç„¶åé…ç½®MySQLä½œä¸ºæŒä¹…åŒ–æ–¹æ¡ˆã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
    <span class=s1>&#39;django.contrib.admin&#39;</span><span class=p>,</span>
    <span class=s1>&#39;django.contrib.auth&#39;</span><span class=p>,</span>
    <span class=s1>&#39;django.contrib.contenttypes&#39;</span><span class=p>,</span>
    <span class=s1>&#39;django.contrib.sessions&#39;</span><span class=p>,</span>
    <span class=s1>&#39;django.contrib.messages&#39;</span><span class=p>,</span>
    <span class=s1>&#39;django.contrib.staticfiles&#39;</span><span class=p>,</span>
    <span class=s1>&#39;polls&#39;</span><span class=p>,</span>
<span class=p>]</span>

<span class=n>DATABASES</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s1>&#39;default&#39;</span><span class=p>:</span> <span class=p>{</span>
        <span class=c1># æ•°æ®åº“å¼•æ“é…ç½®</span>
        <span class=s1>&#39;ENGINE&#39;</span><span class=p>:</span> <span class=s1>&#39;django.db.backends.mysql&#39;</span><span class=p>,</span>
        <span class=c1># æ•°æ®åº“çš„åå­—</span>
        <span class=s1>&#39;NAME&#39;</span><span class=p>:</span> <span class=s1>&#39;vote&#39;</span><span class=p>,</span>
        <span class=c1># æ•°æ®åº“æœåŠ¡å™¨çš„IPåœ°å€ï¼ˆæœ¬æœºå¯ä»¥å†™localhostæˆ–127.0.0.1ï¼‰</span>
        <span class=s1>&#39;HOST&#39;</span><span class=p>:</span> <span class=s1>&#39;localhost&#39;</span><span class=p>,</span>
        <span class=c1># å¯åŠ¨MySQLæœåŠ¡çš„ç«¯å£å·</span>
        <span class=s1>&#39;PORT&#39;</span><span class=p>:</span> <span class=mi>3306</span><span class=p>,</span>
        <span class=c1># æ•°æ®åº“ç”¨æˆ·åå’Œå£ä»¤</span>
        <span class=s1>&#39;USER&#39;</span><span class=p>:</span> <span class=s1>&#39;hellokitty&#39;</span><span class=p>,</span>
        <span class=s1>&#39;PASSWORD&#39;</span><span class=p>:</span> <span class=s1>&#39;Hellokitty.618&#39;</span><span class=p>,</span>
        <span class=c1># æ•°æ®åº“ä½¿ç”¨çš„å­—ç¬¦é›†</span>
        <span class=s1>&#39;CHARSET&#39;</span><span class=p>:</span> <span class=s1>&#39;utf8&#39;</span><span class=p>,</span>
        <span class=c1># æ•°æ®åº“æ—¶é—´æ—¥æœŸçš„æ—¶åŒºè®¾å®š</span>
        <span class=s1>&#39;TIME_ZONE&#39;</span><span class=p>:</span> <span class=s1>&#39;Asia/Chongqing&#39;</span><span class=p>,</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div></div><p>åœ¨é…ç½®ENGINEå±æ€§æ—¶ï¼Œå¸¸ç”¨çš„å¯é€‰å€¼åŒ…æ‹¬ï¼š</p><ul><li><code>'django.db.backends.sqlite3'</code>ï¼šSQLiteåµŒå…¥å¼æ•°æ®åº“ã€‚</li><li><code>'django.db.backends.postgresql'</code>ï¼šBSDè®¸å¯è¯ä¸‹å‘è¡Œçš„å¼€æºå…³ç³»å‹æ•°æ®åº“äº§å“ã€‚</li><li><code>'django.db.backends.mysql'</code>ï¼šç”²éª¨æ–‡å…¬å¸ç»æµé«˜æ•ˆçš„æ•°æ®åº“äº§å“ã€‚</li><li><code>'django.db.backends.oracle'</code>ï¼šç”²éª¨æ–‡å…¬å¸å…³ç³»å‹æ•°æ®åº“æ——èˆ°äº§å“ã€‚</li></ul><p>å…¶ä»–çš„é…ç½®å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ä¸­<a href=https://docs.djangoproject.com/zh-hans/2.0/ref/databases/#third-party-notes target=_blank rel=noopener>æ•°æ®åº“é…ç½®</a>çš„éƒ¨åˆ†ã€‚</p></li><li><p>Djangoæ¡†æ¶æä¾›äº†ORMæ¥è§£å†³æ•°æ®æŒä¹…åŒ–é—®é¢˜ï¼ŒORMç¿»è¯‘æˆä¸­æ–‡å«â€œå¯¹è±¡å…³ç³»æ˜ å°„â€ã€‚å› ä¸ºPythonæ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œæˆ‘ä»¬åœ¨Pythonç¨‹åºä¸­ä½¿ç”¨å¯¹è±¡æ¨¡å‹æ¥ä¿å­˜æ•°æ®ï¼Œè€Œå…³ç³»å‹æ•°æ®åº“ä½¿ç”¨å…³ç³»æ¨¡å‹ï¼Œç”¨äºŒç»´è¡¨æ¥ä¿å­˜æ•°æ®ï¼Œè¿™ä¸¤ç§æ¨¡å‹å¹¶ä¸åŒ¹é…ã€‚ä½¿ç”¨ORMæ˜¯ä¸ºäº†å®ç°å¯¹è±¡æ¨¡å‹åˆ°å…³ç³»æ¨¡å‹çš„<strong>åŒå‘è½¬æ¢</strong>ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨Pythonä»£ç ä¸­ä¹¦å†™SQLè¯­å¥å’Œæ¸¸æ ‡æ“ä½œï¼Œå› ä¸ºè¿™äº›éƒ½ä¼šç”±ORMè‡ªåŠ¨å®Œæˆã€‚åˆ©ç”¨Djangoçš„ORMï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†åˆšæ‰åˆ›å»ºçš„å­¦ç§‘è¡¨å’Œè€å¸ˆè¡¨å˜æˆDjangoä¸­çš„æ¨¡å‹ç±»ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash>python manage.py inspectdb &gt; polls/models.py
</code></pre></td></tr></table></div></div></div><p>æˆ‘ä»¬å¯ä»¥å¯¹è‡ªåŠ¨ç”Ÿæˆçš„æ¨¡å‹ç±»ç¨ä½œè°ƒæ•´ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=kn>from</span> <span class=nn>django.db</span> <span class=kn>import</span> <span class=n>models</span>


<span class=k>class</span> <span class=nc>Subject</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>no</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>AutoField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;ç¼–å·&#39;</span><span class=p>)</span>
    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;åç§°&#39;</span><span class=p>)</span>
    <span class=n>intro</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;ä»‹ç»&#39;</span><span class=p>)</span>
    <span class=n>is_hot</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>BooleanField</span><span class=p>(</span><span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;æ˜¯å¦çƒ­é—¨&#39;</span><span class=p>)</span>

    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
        <span class=n>managed</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>db_table</span> <span class=o>=</span> <span class=s1>&#39;tb_subject&#39;</span>


<span class=k>class</span> <span class=nc>Teacher</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>no</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>AutoField</span><span class=p>(</span><span class=n>primary_key</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;ç¼–å·&#39;</span><span class=p>)</span>
    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;å§“å&#39;</span><span class=p>)</span>
    <span class=n>sex</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>BooleanField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;æ€§åˆ«&#39;</span><span class=p>)</span>
    <span class=n>birth</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>DateField</span><span class=p>(</span><span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;å‡ºç”Ÿæ—¥æœŸ&#39;</span><span class=p>)</span>
    <span class=n>intro</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;ä¸ªäººä»‹ç»&#39;</span><span class=p>)</span>
    <span class=n>photo</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ImageField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>255</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;ç…§ç‰‡&#39;</span><span class=p>)</span>
    <span class=n>good_count</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>db_column</span><span class=o>=</span><span class=s1>&#39;gcount&#39;</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;å¥½è¯„æ•°&#39;</span><span class=p>)</span>
    <span class=n>bad_count</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>db_column</span><span class=o>=</span><span class=s1>&#39;bcount&#39;</span><span class=p>,</span> <span class=n>verbose_name</span><span class=o>=</span><span class=s1>&#39;å·®è¯„æ•°&#39;</span><span class=p>)</span>
    <span class=n>subject</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>ForeignKey</span><span class=p>(</span><span class=n>Subject</span><span class=p>,</span> <span class=n>models</span><span class=o>.</span><span class=n>DO_NOTHING</span><span class=p>,</span> <span class=n>db_column</span><span class=o>=</span><span class=s1>&#39;sno&#39;</span><span class=p>)</span>

    <span class=k>class</span> <span class=nc>Meta</span><span class=p>:</span>
        <span class=n>managed</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>db_table</span> <span class=o>=</span> <span class=s1>&#39;tb_teacher&#39;</span>
</code></pre></td></tr></table></div></div></div><blockquote><p><strong>è¯´æ˜</strong>ï¼šæ¨¡å‹ç±»éƒ½ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ª<code>Model</code>ç±»ï¼Œæ¨¡å‹ç±»è·Ÿå…³ç³»å‹æ•°æ®åº“çš„äºŒç»´è¡¨å¯¹åº”ï¼Œæ¨¡å‹å¯¹è±¡è·Ÿè¡¨ä¸­çš„è®°å½•å¯¹åº”ï¼Œæ¨¡å‹å¯¹è±¡çš„å±æ€§è·Ÿè¡¨ä¸­çš„å­—æ®µå¯¹åº”ã€‚å¦‚æœå¯¹ä¸Šé¢æ¨¡å‹ç±»çš„å±æ€§å®šä¹‰ä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œå¯ä»¥çœ‹çœ‹æœ¬æ–‡åé¢æä¾›çš„â€œæ¨¡å‹å®šä¹‰å‚è€ƒâ€éƒ¨åˆ†çš„å†…å®¹ã€‚</p></blockquote></li></ol><h3 id=ä½¿ç”¨ormå®Œæˆæ¨¡å‹çš„crudæ“ä½œ><a href=#ä½¿ç”¨ormå®Œæˆæ¨¡å‹çš„crudæ“ä½œ class=anchor-link>#</a>ä½¿ç”¨ORMå®Œæˆæ¨¡å‹çš„CRUDæ“ä½œ</h3><p>æœ‰äº†Djangoæ¡†æ¶çš„ORMï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥å®ç°å¯¹æ•°æ®çš„CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰æ“ä½œã€‚æˆ‘ä»¬å¯ä»¥åœ¨PyCharmçš„ç»ˆç«¯ä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤è¿›å…¥åˆ°Djangoé¡¹ç›®çš„äº¤äº’å¼ç¯å¢ƒï¼Œç„¶åå°è¯•å¯¹æ¨¡å‹çš„æ“ä½œã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash>python manage.py shell
</code></pre></td></tr></table></div></div></div><h4 id=æ–°å¢><a href=#æ–°å¢ class=anchor-link>#</a>æ–°å¢</h4><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=kn>from</span> <span class=nn>polls.models</span> <span class=kn>import</span> <span class=n>Subject</span>

<span class=n>subject1</span> <span class=o>=</span> <span class=n>Subject</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;Pythonå…¨æ ˆå¼€å‘&#39;</span><span class=p>,</span> <span class=n>intro</span><span class=o>=</span><span class=s1>&#39;å½“ä¸‹æœ€çƒ­é—¨çš„å­¦ç§‘&#39;</span><span class=p>,</span> <span class=n>is_hot</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>subject1</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<span class=n>subject2</span> <span class=o>=</span> <span class=n>Subject</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;å…¨æ ˆè½¯ä»¶æµ‹è¯•&#39;</span><span class=p>,</span> <span class=n>intro</span><span class=o>=</span><span class=s1>&#39;å­¦ä¹ è‡ªåŠ¨åŒ–æµ‹è¯•çš„å­¦ç§‘&#39;</span><span class=p>,</span> <span class=n>is_hot</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<span class=n>subject2</span><span class=o>.</span><span class=n>save</span><span class=p>()</span>
<span class=n>subject3</span> <span class=o>=</span> <span class=n>Subject</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;JavaEEåˆ†å¸ƒå¼å¼€å‘&#39;</span><span class=p>,</span> <span class=n>intro</span><span class=o>=</span><span class=s1>&#39;åŸºäºJavaè¯­è¨€çš„æœåŠ¡å™¨åº”ç”¨å¼€å‘&#39;</span><span class=p>,</span> <span class=n>is_hot</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre></td></tr></table></div></div></div><h4 id=åˆ é™¤><a href=#åˆ é™¤ class=anchor-link>#</a>åˆ é™¤</h4><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=n>subject</span> <span class=o>=</span> <span class=n>Subject</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>no</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
<span class=n>subject</span><span class=o>.</span><span class=n>delete</span><span class=p>()</span>
</code></pre></td></tr></table></div></div></div><h4 id=æ›´æ–°><a href=#æ›´æ–° class=anchor-link>#</a>æ›´æ–°</h4><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=nv>subject</span> <span class=o>=</span> Subject.objects.get<span class=o>(</span><span class=nv>no</span><span class=o>=</span>1<span class=o>)</span>
subject.name <span class=o>=</span> <span class=s1>&#39;Pythonå…¨æ ˆ+äººå·¥æ™ºèƒ½&#39;</span>
subject.save<span class=o>()</span>
</code></pre></td></tr></table></div></div></div><h4 id=æŸ¥è¯¢><a href=#æŸ¥è¯¢ class=anchor-link>#</a>æŸ¥è¯¢</h4><ol><li>æŸ¥è¯¢æ‰€æœ‰å¯¹è±¡ã€‚</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell>Subjects.objects.all<span class=o>()</span>
</code></pre></td></tr></table></div></div></div><ol start=2><li>è¿‡æ»¤æ•°æ®ã€‚</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=c1># æŸ¥è¯¢åç§°ä¸ºâ€œPythonå…¨æ ˆ+äººå·¥æ™ºèƒ½â€çš„å­¦ç§‘</span>
Subject.objects.filter<span class=o>(</span><span class=nv>name</span><span class=o>=</span><span class=s1>&#39;Pythonå…¨æ ˆ+äººå·¥æ™ºèƒ½&#39;</span><span class=o>)</span>

<span class=c1># æŸ¥è¯¢åç§°åŒ…å«â€œå…¨æ ˆâ€çš„å­¦ç§‘ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰</span>
Subject.objects.filter<span class=o>(</span><span class=nv>name__contains</span><span class=o>=</span><span class=s1>&#39;å…¨æ ˆ&#39;</span><span class=o>)</span>
Subject.objects.filter<span class=o>(</span><span class=nv>name__startswith</span><span class=o>=</span><span class=s1>&#39;å…¨æ ˆ&#39;</span><span class=o>)</span>
Subject.objects.filter<span class=o>(</span><span class=nv>name__endswith</span><span class=o>=</span><span class=s1>&#39;å…¨æ ˆ&#39;</span><span class=o>)</span>

<span class=c1># æŸ¥è¯¢æ‰€æœ‰çƒ­é—¨å­¦ç§‘</span>
Subject.objects.filter<span class=o>(</span><span class=nv>is_hot</span><span class=o>=</span>True<span class=o>)</span>

<span class=c1># æŸ¥è¯¢ç¼–å·å¤§äº3å°äº10çš„å­¦ç§‘</span>
Subject.objects.filter<span class=o>(</span><span class=nv>no__gt</span><span class=o>=</span>3<span class=o>)</span>.filter<span class=o>(</span><span class=nv>no__lt</span><span class=o>=</span>10<span class=o>)</span>
Subject.objects.filter<span class=o>(</span><span class=nv>no__gt</span><span class=o>=</span>3, <span class=nv>no__lt</span><span class=o>=</span>10<span class=o>)</span>

<span class=c1># æŸ¥è¯¢ç¼–å·åœ¨3åˆ°7ä¹‹é—´çš„å­¦ç§‘</span>
Subject.objects.filter<span class=o>(</span><span class=nv>no__ge</span><span class=o>=</span>3, <span class=nv>no__le</span><span class=o>=</span>7<span class=o>)</span>
Subject.objects.filter<span class=o>(</span><span class=nv>no__range</span><span class=o>=(</span>3, 7<span class=o>))</span>
</code></pre></td></tr></table></div></div></div><ol start=3><li>æŸ¥è¯¢å•ä¸ªå¯¹è±¡ã€‚</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=c1># æŸ¥è¯¢ä¸»é”®ä¸º1çš„å­¦ç§‘</span>
Subject.objects.get<span class=o>(</span><span class=nv>pk</span><span class=o>=</span>1<span class=o>)</span>
Subject.objects.get<span class=o>(</span><span class=nv>no</span><span class=o>=</span>1<span class=o>)</span>
Subject.objects.filter<span class=o>(</span><span class=nv>no</span><span class=o>=</span>1<span class=o>)</span>.first<span class=o>()</span>
Subject.objects.filter<span class=o>(</span><span class=nv>no</span><span class=o>=</span>1<span class=o>)</span>.last<span class=o>()</span>
</code></pre></td></tr></table></div></div></div><ol start=4><li>æ’åºã€‚</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=c1># æŸ¥è¯¢æ‰€æœ‰å­¦ç§‘æŒ‰ç¼–å·å‡åºæ’åˆ—</span>
Subject.objects.order_by<span class=o>(</span><span class=s1>&#39;no&#39;</span><span class=o>)</span>
<span class=c1># æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æŒ‰éƒ¨é—¨ç¼–å·é™åºæ’åˆ—</span>
Subject.objects.order_by<span class=o>(</span><span class=s1>&#39;-no&#39;</span><span class=o>)</span>
</code></pre></td></tr></table></div></div></div><ol start=5><li>åˆ‡ç‰‡ï¼ˆåˆ†é¡µæŸ¥è¯¢ï¼‰ã€‚</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=c1># æŒ‰ç¼–å·ä»å°åˆ°å¤§æŸ¥è¯¢å‰3ä¸ªå­¦ç§‘</span>
Subject.objects.order_by<span class=o>(</span><span class=s1>&#39;no&#39;</span><span class=o>)[</span>:3<span class=o>]</span>
</code></pre></td></tr></table></div></div></div><ol start=6><li>è®¡æ•°ã€‚</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=c1># æŸ¥è¯¢ä¸€å…±æœ‰å¤šå°‘ä¸ªå­¦ç§‘</span>
<span class=n>Subject</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
</code></pre></td></tr></table></div></div></div><ol start=7><li>é«˜çº§æŸ¥è¯¢ã€‚</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell><span class=c1># æŸ¥è¯¢ç¼–å·ä¸º1çš„å­¦ç§‘çš„è€å¸ˆ</span>
Teacher.objects.filter<span class=o>(</span><span class=nv>subject__no</span><span class=o>=</span>1<span class=o>)</span>
Subject.objects.get<span class=o>(</span><span class=nv>pk</span><span class=o>=</span>1<span class=o>)</span>.teacher_set.all<span class=o>()</span> 

<span class=c1># æŸ¥è¯¢å­¦ç§‘åç§°æœ‰â€œå…¨æ ˆâ€äºŒå­—çš„å­¦ç§‘çš„è€å¸ˆ</span>
Teacher.objects.filter<span class=o>(</span><span class=nv>subject__name__contains</span><span class=o>=</span><span class=s1>&#39;å…¨æ ˆ&#39;</span><span class=o>)</span> 
</code></pre></td></tr></table></div></div></div><blockquote><p><strong>è¯´æ˜1</strong>ï¼šç”±äºè€å¸ˆä¸å­¦ç§‘ä¹‹é—´å­˜åœ¨å¤šå¯¹ä¸€å¤–é”®å…³è”ï¼Œæ‰€ä»¥èƒ½é€šè¿‡å­¦ç§‘åå‘æŸ¥è¯¢åˆ°è¯¥å­¦ç§‘çš„è€å¸ˆï¼ˆä»ä¸€å¯¹å¤šå…³ç³»ä¸­â€œä¸€â€çš„ä¸€æ–¹æŸ¥è¯¢â€œå¤šâ€çš„ä¸€æ–¹ï¼‰ï¼Œåå‘æŸ¥è¯¢å±æ€§é»˜è®¤çš„åå­—æ˜¯<code>ç±»åå°å†™_set</code>ï¼ˆå¦‚ä¸Šé¢ä¾‹å­ä¸­çš„<code>teacher_set</code>ï¼‰ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºæ¨¡å‹æ—¶é€šè¿‡<code>ForeingKey</code>çš„<code>related_name</code>å±æ€§æŒ‡å®šåå‘æŸ¥è¯¢å±æ€§çš„åå­—ã€‚å¦‚æœä¸å¸Œæœ›æ‰§è¡Œåå‘æŸ¥è¯¢å¯ä»¥å°†<code>related_name</code>å±æ€§è®¾ç½®ä¸º<code>'+'</code>æˆ–è€…ä»¥<code>'+'</code>å¼€å¤´çš„å­—ç¬¦ä¸²ã€‚</p></blockquote><blockquote><p><strong>è¯´æ˜2</strong>ï¼šORMæŸ¥è¯¢å¤šä¸ªå¯¹è±¡æ—¶ä¼šè¿”å›QuerySetå¯¹è±¡ï¼ŒQuerySetä½¿ç”¨äº†æƒ°æ€§æŸ¥è¯¢ï¼Œå³åœ¨åˆ›å»ºQuerySetå¯¹è±¡çš„è¿‡ç¨‹ä¸­ä¸æ¶‰åŠä»»ä½•æ•°æ®åº“æ´»åŠ¨ï¼Œç­‰çœŸæ­£ç”¨åˆ°å¯¹è±¡æ—¶ï¼ˆå¯¹QuerySetæ±‚å€¼ï¼‰æ‰å‘æ•°æ®åº“å‘é€SQLè¯­å¥å¹¶è·å–å¯¹åº”çš„ç»“æœï¼Œè¿™ä¸€ç‚¹åœ¨å®é™…å¼€å‘ä¸­éœ€è¦å¼•èµ·æ³¨æ„ï¼</p></blockquote><blockquote><p><strong>è¯´æ˜3</strong>ï¼šå¦‚æœå¸Œæœ›æ›´æ–°å¤šæ¡æ•°æ®ï¼Œä¸ç”¨å…ˆé€ä¸€è·å–æ¨¡å‹å¯¹è±¡å†ä¿®æ”¹å¯¹è±¡å±æ€§ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨QuerySetå¯¹è±¡çš„<code>update()</code>æ–¹æ³•ä¸€æ¬¡æ€§æ›´æ–°å¤šæ¡æ•°æ®ã€‚</p></blockquote><h3 id=åˆ©ç”¨djangoåå°ç®¡ç†æ¨¡å‹><a href=#åˆ©ç”¨djangoåå°ç®¡ç†æ¨¡å‹ class=anchor-link>#</a>åˆ©ç”¨Djangoåå°ç®¡ç†æ¨¡å‹</h3><p>åœ¨åˆ›å»ºå¥½æ¨¡å‹ç±»ä¹‹åï¼Œå¯ä»¥é€šè¿‡Djangoæ¡†æ¶è‡ªå¸¦çš„åå°ç®¡ç†åº”ç”¨ï¼ˆ<code>admin</code>åº”ç”¨ï¼‰å®ç°å¯¹æ¨¡å‹çš„ç®¡ç†ã€‚è™½ç„¶å®é™…åº”ç”¨ä¸­ï¼Œè¿™ä¸ªåå°å¯èƒ½å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯åœ¨å­¦ä¹ Djangoæ¡†æ¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>admin</code>åº”ç”¨æ¥ç®¡ç†æˆ‘ä»¬çš„æ¨¡å‹ï¼ŒåŒæ—¶ä¹Ÿé€šè¿‡å®ƒæ¥äº†è§£ä¸€ä¸ªé¡¹ç›®çš„åå°ç®¡ç†ç³»ç»Ÿéœ€è¦å“ªäº›åŠŸèƒ½ã€‚ä½¿ç”¨Djangoè‡ªå¸¦çš„<code>admin</code>åº”ç”¨æ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºã€‚</p><ol><li><p>å°†<code>admin</code>åº”ç”¨æ‰€éœ€çš„è¡¨è¿ç§»åˆ°æ•°æ®åº“ä¸­ã€‚<code>admin</code>åº”ç”¨æœ¬èº«ä¹Ÿéœ€è¦æ•°æ®åº“çš„æ”¯æŒï¼Œè€Œä¸”åœ¨<code>admin</code>åº”ç”¨ä¸­å·²ç»å®šä¹‰å¥½äº†ç›¸å…³çš„æ•°æ®æ¨¡å‹ç±»ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡æ¨¡å‹è¿ç§»æ“ä½œå°±èƒ½è‡ªåŠ¨åœ¨æ•°æ®åº“ä¸­ç”Ÿæˆæ‰€éœ€çš„äºŒç»´è¡¨ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash>python manage.py migrate
</code></pre></td></tr></table></div></div></div></li><li><p>åˆ›å»ºè®¿é—®<code>admin</code>åº”ç”¨çš„è¶…çº§ç”¨æˆ·è´¦å·ï¼Œè¿™é‡Œéœ€è¦è¾“å…¥ç”¨æˆ·åã€é‚®ç®±å’Œå£ä»¤ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Shell data-lang=Shell>python manage.py createsuperuser
</code></pre></td></tr></table></div></div></div><blockquote><p><strong>è¯´æ˜</strong>ï¼šè¾“å…¥å£ä»¤æ—¶æ²¡æœ‰å›æ˜¾ä¹Ÿä¸èƒ½é€€æ ¼ï¼Œéœ€è¦ä¸€æ°”å‘µæˆå®Œæˆè¾“å…¥ã€‚</p></blockquote></li><li><p>è¿è¡Œé¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®<code>http://127.0.0.1:8000/admin</code>ï¼Œè¾“å…¥åˆšæ‰åˆ›å»ºçš„è¶…çº§ç”¨æˆ·è´¦å·å’Œå¯†ç è¿›è¡Œç™»å½•ã€‚</p><p><img src=/Users/Hao/Desktop/Python-100-Days/Day41-55//res/django-admin-login.png alt></p><p>ç™»å½•åè¿›å…¥ç®¡ç†å‘˜æ“ä½œå¹³å°ã€‚</p><p><img src=/res/django-admin-apps.png alt></p><p>æ³¨æ„ï¼Œæˆ‘ä»¬æš‚æ—¶è¿˜æ²¡èƒ½åœ¨<code>admin</code>åº”ç”¨ä¸­çœ‹åˆ°ä¹‹å‰åˆ›å»ºçš„æ¨¡å‹ç±»ï¼Œä¸ºæ­¤éœ€è¦åœ¨<code>polls</code>åº”ç”¨çš„<code>admin.py</code>æ–‡ä»¶ä¸­å¯¹éœ€è¦ç®¡ç†çš„æ¨¡å‹è¿›è¡Œæ³¨å†Œã€‚</p></li><li><p>æ³¨å†Œæ¨¡å‹ç±»ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>

<span class=kn>from</span> <span class=nn>polls.models</span> <span class=kn>import</span> <span class=n>Subject</span><span class=p>,</span> <span class=n>Teacher</span>

<span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=n>Subject</span><span class=p>)</span>
<span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=n>Teacher</span><span class=p>)</span>
</code></pre></td></tr></table></div></div></div><p>æ³¨å†Œæ¨¡å‹ç±»åï¼Œå°±å¯ä»¥åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­çœ‹åˆ°å®ƒä»¬ã€‚</p><p><img src=/res/django-admin-models.png alt></p></li><li><p>å¯¹æ¨¡å‹è¿›è¡ŒCRUDæ“ä½œã€‚</p><p>å¯ä»¥åœ¨ç®¡ç†å‘˜å¹³å°å¯¹æ¨¡å‹è¿›è¡ŒCï¼ˆæ–°å¢ï¼‰ã€Rï¼ˆæŸ¥çœ‹ï¼‰ã€Uï¼ˆæ›´æ–°ï¼‰ã€Dï¼ˆåˆ é™¤ï¼‰æ“ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><ul><li><p>æ·»åŠ å­¦ç§‘ã€‚</p><p><img src=/res/django-admin-add-model.png alt></p></li><li><p>æŸ¥çœ‹æ‰€æœ‰å­¦ç§‘ã€‚</p><p><img src=/res/django-admin-view-models.png alt></p></li><li><p>åˆ é™¤å’Œæ›´æ–°å­¦ç§‘ã€‚</p><p><img src=/res/django-admin-delete-update-model.png alt></p></li></ul></li><li><p>æ³¨å†Œæ¨¡å‹ç®¡ç†ç±»ã€‚</p><p>å¯èƒ½å¤§å®¶å·²ç»æ³¨æ„åˆ°äº†ï¼Œåˆšæ‰åœ¨åå°æŸ¥çœ‹éƒ¨é—¨ä¿¡æ¯çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„éƒ¨é—¨ä¿¡æ¯å¹¶ä¸ç›´è§‚ï¼Œä¸ºæ­¤æˆ‘ä»¬å†ä¿®æ”¹<code>admin.py</code>æ–‡ä»¶ï¼Œé€šè¿‡æ³¨å†Œæ¨¡å‹ç®¡ç†ç±»ï¼Œå¯ä»¥åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­æ›´å¥½çš„ç®¡ç†æ¨¡å‹ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>

<span class=kn>from</span> <span class=nn>polls.models</span> <span class=kn>import</span> <span class=n>Subject</span><span class=p>,</span> <span class=n>Teacher</span>


<span class=k>class</span> <span class=nc>SubjectModelAdmin</span><span class=p>(</span><span class=n>admin</span><span class=o>.</span><span class=n>ModelAdmin</span><span class=p>):</span>
    <span class=n>list_display</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;no&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;intro&#39;</span><span class=p>,</span> <span class=s1>&#39;is_hot&#39;</span><span class=p>)</span>
    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=p>)</span>
    <span class=n>ordering</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;no&#39;</span><span class=p>,</span> <span class=p>)</span>


<span class=k>class</span> <span class=nc>TeacherModelAdmin</span><span class=p>(</span><span class=n>admin</span><span class=o>.</span><span class=n>ModelAdmin</span><span class=p>):</span>
    <span class=n>list_display</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;no&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;sex&#39;</span><span class=p>,</span> <span class=s1>&#39;birth&#39;</span><span class=p>,</span> <span class=s1>&#39;good_count&#39;</span><span class=p>,</span> <span class=s1>&#39;bad_count&#39;</span><span class=p>,</span> <span class=s1>&#39;subject&#39;</span><span class=p>)</span>
    <span class=n>search_fields</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=p>)</span>
    <span class=n>ordering</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;no&#39;</span><span class=p>,</span> <span class=p>)</span>


<span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=n>Subject</span><span class=p>,</span> <span class=n>SubjectModelAdmin</span><span class=p>)</span>
<span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=n>Teacher</span><span class=p>,</span> <span class=n>TeacherModelAdmin</span><span class=p>)</span>
</code></pre></td></tr></table></div></div></div><p><img src=/res/django-admin-view-models-subject.png alt></p><p><img src=/res/django-admin-view-models-teacher.png alt></p><p>ä¸ºäº†æ›´å¥½çš„æŸ¥çœ‹æ¨¡å‹ï¼Œæˆ‘ä»¬ä¸º<code>Subject</code>ç±»æ·»åŠ <code>__str__</code>é­”æ³•æ–¹æ³•ï¼Œå¹¶åœ¨è¯¥æ–¹æ³•ä¸­è¿”å›å­¦ç§‘åå­—ã€‚è¿™æ ·åœ¨å¦‚ä¸Šå›¾æ‰€ç¤ºçš„æŸ¥çœ‹è€å¸ˆçš„é¡µé¢ä¸Šæ˜¾ç¤ºè€å¸ˆæ‰€å±å­¦ç§‘æ—¶ï¼Œå°±ä¸å†æ˜¯<code>Subject object(1)</code>è¿™æ ·æ™¦æ¶©çš„ä¿¡æ¯ï¼Œè€Œæ˜¯å­¦ç§‘çš„åç§°ã€‚</p></li></ol><h3 id=å®ç°å­¦ç§‘é¡µå’Œè€å¸ˆé¡µæ•ˆæœ><a href=#å®ç°å­¦ç§‘é¡µå’Œè€å¸ˆé¡µæ•ˆæœ class=anchor-link>#</a>å®ç°å­¦ç§‘é¡µå’Œè€å¸ˆé¡µæ•ˆæœ</h3><ol><li><p>ä¿®æ”¹<code>polls/views.py</code>æ–‡ä»¶ï¼Œç¼–å†™è§†å›¾å‡½æ•°å®ç°å¯¹å­¦ç§‘é¡µå’Œè€å¸ˆé¡µçš„æ¸²æŸ“ã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=kn>from</span> <span class=nn>django.shortcuts</span> <span class=kn>import</span> <span class=n>render</span><span class=p>,</span> <span class=n>redirect</span>

<span class=kn>from</span> <span class=nn>polls.models</span> <span class=kn>import</span> <span class=n>Subject</span><span class=p>,</span> <span class=n>Teacher</span>


<span class=k>def</span> <span class=nf>show_subjects</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
    <span class=n>subjects</span> <span class=o>=</span> <span class=n>Subject</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>all</span><span class=p>()</span><span class=o>.</span><span class=n>order_by</span><span class=p>(</span><span class=s1>&#39;no&#39;</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>render</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=s1>&#39;subjects.html&#39;</span><span class=p>,</span> <span class=p>{</span><span class=s1>&#39;subjects&#39;</span><span class=p>:</span> <span class=n>subjects</span><span class=p>})</span>


<span class=k>def</span> <span class=nf>show_teachers</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>sno</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>GET</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;sno&#39;</span><span class=p>))</span>
        <span class=n>teachers</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>if</span> <span class=n>sno</span><span class=p>:</span>
            <span class=n>subject</span> <span class=o>=</span> <span class=n>Subject</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>only</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>no</span><span class=o>=</span><span class=n>sno</span><span class=p>)</span>
            <span class=n>teachers</span> <span class=o>=</span> <span class=n>Teacher</span><span class=o>.</span><span class=n>objects</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>subject</span><span class=o>=</span><span class=n>subject</span><span class=p>)</span><span class=o>.</span><span class=n>order_by</span><span class=p>(</span><span class=s1>&#39;no&#39;</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>render</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=s1>&#39;teachers.html&#39;</span><span class=p>,</span> <span class=p>{</span>
            <span class=s1>&#39;subject&#39;</span><span class=p>:</span> <span class=n>subject</span><span class=p>,</span>
            <span class=s1>&#39;teachers&#39;</span><span class=p>:</span> <span class=n>teachers</span>
        <span class=p>})</span>
    <span class=k>except</span> <span class=p>(</span><span class=ne>ValueError</span><span class=p>,</span> <span class=n>Subject</span><span class=o>.</span><span class=n>DoesNotExist</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>redirect</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</code></pre></td></tr></table></div></div></div></li><li><p>ä¿®æ”¹<code>templates/subjects.html</code>å’Œ<code>templates/teachers.html</code>æ¨¡æ¿é¡µã€‚</p><p><code>subjects.html</code></p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=cp>&lt;!DOCTYPE html&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;en&#34;</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
   <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;UTF-8&#34;</span><span class=p>&gt;</span>
   <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>å­¦ç§‘ä¿¡æ¯<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
   <span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
       <span class=p>#</span><span class=nn>container</span> <span class=p>{</span>
           <span class=k>width</span><span class=p>:</span> <span class=mi>80</span><span class=kt>%</span><span class=p>;</span>
           <span class=k>margin</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span> <span class=kc>auto</span><span class=p>;</span>
       <span class=p>}</span>
       <span class=p>.</span><span class=nc>user</span> <span class=p>{</span>
           <span class=k>float</span><span class=p>:</span> <span class=kc>right</span><span class=p>;</span>
           <span class=k>margin-right</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
       <span class=p>}</span>
       <span class=p>.</span><span class=nc>user</span><span class=o>&gt;</span><span class=nt>a</span> <span class=p>{</span>
           <span class=k>margin-right</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
       <span class=p>}</span>
       <span class=p>#</span><span class=nn>main</span><span class=o>&gt;</span><span class=nt>dl</span><span class=o>&gt;</span><span class=nt>dt</span> <span class=p>{</span>
           <span class=k>font-size</span><span class=p>:</span> <span class=mf>1.5</span><span class=kt>em</span><span class=p>;</span>
           <span class=k>font-weight</span><span class=p>:</span> <span class=kc>bold</span><span class=p>;</span>
       <span class=p>}</span>
       <span class=p>#</span><span class=nn>main</span><span class=o>&gt;</span><span class=nt>dl</span><span class=o>&gt;</span><span class=nt>dd</span> <span class=p>{</span>
           <span class=k>font-size</span><span class=p>:</span> <span class=mf>1.2</span><span class=kt>em</span><span class=p>;</span>
       <span class=p>}</span>
       <span class=nt>a</span> <span class=p>{</span>
           <span class=k>text-decoration</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
           <span class=k>color</span><span class=p>:</span> <span class=kc>darkcyan</span><span class=p>;</span>
       <span class=p>}</span>
   <span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
   <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;container&#34;</span><span class=p>&gt;</span>
       <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;user&#34;</span><span class=p>&gt;</span>
           <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;login.html&#34;</span><span class=p>&gt;</span>ç”¨æˆ·ç™»å½•<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
           <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;register.html&#34;</span><span class=p>&gt;</span>å¿«é€Ÿæ³¨å†Œ<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
       <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
       <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>æ‰£ä¸å­¦å ‚æ‰€æœ‰å­¦ç§‘<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
       <span class=p>&lt;</span><span class=nt>hr</span><span class=p>&gt;</span>
       <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;main&#34;</span><span class=p>&gt;</span>
           {% for subject in subjects %}
           <span class=p>&lt;</span><span class=nt>dl</span><span class=p>&gt;</span>
               <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;</span>
                   <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/teachers/?sno={{ subject.no }}&#34;</span><span class=p>&gt;</span>{{ subject.name }}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
                   {% if subject.is_hot %}
                   <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/static/images/hot-icon-small.png&#34;</span><span class=p>&gt;</span>
                   {% endif %}
               <span class=p>&lt;/</span><span class=nt>dt</span><span class=p>&gt;</span>
               <span class=p>&lt;</span><span class=nt>dd</span><span class=p>&gt;</span>{{ subject.intro }}<span class=p>&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>
           <span class=p>&lt;/</span><span class=nt>dl</span><span class=p>&gt;</span>
           {% endfor %}
       <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
   <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></td></tr></table></div></div></div><p><code>teachers.html</code></p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-HTML data-lang=HTML><span class=cp>&lt;!DOCTYPE html&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&#34;en&#34;</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;UTF-8&#34;</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>è€å¸ˆä¿¡æ¯<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
        <span class=p>#</span><span class=nn>container</span> <span class=p>{</span>
            <span class=k>width</span><span class=p>:</span> <span class=mi>80</span><span class=kt>%</span><span class=p>;</span>
            <span class=k>margin</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span> <span class=kc>auto</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=p>.</span><span class=nc>teacher</span> <span class=p>{</span>
            <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
            <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span> <span class=kc>auto</span><span class=p>;</span>
            <span class=k>padding</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span> <span class=mi>0</span><span class=p>;</span>
            <span class=k>border-bottom</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>dashed</span> <span class=kc>gray</span><span class=p>;</span>
            <span class=k>overflow</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=p>.</span><span class=nc>teacher</span><span class=o>&gt;</span><span class=nt>div</span> <span class=p>{</span>
            <span class=k>float</span><span class=p>:</span> <span class=kc>left</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=p>.</span><span class=nc>photo</span> <span class=p>{</span>
            <span class=k>height</span><span class=p>:</span> <span class=mi>140</span><span class=kt>px</span><span class=p>;</span>
            <span class=k>border-radius</span><span class=p>:</span> <span class=mi>75</span><span class=kt>px</span><span class=p>;</span>
            <span class=k>overflow</span><span class=p>:</span> <span class=kc>hidden</span><span class=p>;</span>
            <span class=k>margin-left</span><span class=p>:</span> <span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=p>.</span><span class=nc>info</span> <span class=p>{</span>
            <span class=k>width</span><span class=p>:</span> <span class=mi>75</span><span class=kt>%</span><span class=p>;</span>
            <span class=k>margin-left</span><span class=p>:</span> <span class=mi>30</span><span class=kt>px</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=p>.</span><span class=nc>info</span> <span class=nt>div</span> <span class=p>{</span>
            <span class=k>clear</span><span class=p>:</span> <span class=kc>both</span><span class=p>;</span>
            <span class=k>margin</span><span class=p>:</span> <span class=mi>5</span><span class=kt>px</span> <span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=p>.</span><span class=nc>info</span> <span class=nt>span</span> <span class=p>{</span>
            <span class=k>margin-right</span><span class=p>:</span> <span class=mi>25</span><span class=kt>px</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=p>.</span><span class=nc>info</span> <span class=nt>a</span> <span class=p>{</span>
            <span class=k>text-decoration</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
            <span class=k>color</span><span class=p>:</span> <span class=kc>darkcyan</span><span class=p>;</span>
        <span class=p>}</span>
    <span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;container&#34;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>{{ subject.name }}å­¦ç§‘çš„è€å¸ˆä¿¡æ¯<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>hr</span><span class=p>&gt;</span>
        {% if not teachers %}
            <span class=p>&lt;</span><span class=nt>h2</span><span class=p>&gt;</span>æš‚æ— è¯¥å­¦ç§‘è€å¸ˆä¿¡æ¯<span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
        {% endif %}
        {% for teacher in teachers %}
        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;teacher&#34;</span><span class=p>&gt;</span>
            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;photo&#34;</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/static/images/{{ teacher.photo }}&#34;</span> <span class=na>height</span><span class=o>=</span><span class=s>&#34;140&#34;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&#34;&#34;</span><span class=p>&gt;</span>
            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
            <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;info&#34;</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;&lt;</span><span class=nt>strong</span><span class=p>&gt;</span>å§“åï¼š{{ teacher.name }}<span class=p>&lt;/</span><span class=nt>strong</span><span class=p>&gt;&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>æ€§åˆ«ï¼š{{ teacher.sex | yesno:&#39;ç”·,å¥³&#39; }}<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>å‡ºç”Ÿæ—¥æœŸï¼š{{ teacher.birth | date:&#39;Yå¹´næœˆjæ—¥&#39;}}<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;intro&#34;</span><span class=p>&gt;</span>{{ teacher.intro }}<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
                <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;comment&#34;</span><span class=p>&gt;</span>
                    <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;&#34;</span><span class=p>&gt;</span>å¥½è¯„<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span><span class=ni>&amp;nbsp;</span>(<span class=p>&lt;</span><span class=nt>strong</span><span class=p>&gt;</span>{{ teacher.good_count }}<span class=p>&lt;/</span><span class=nt>strong</span><span class=p>&gt;</span>)
                    <span class=ni>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span>
                    <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;&#34;</span><span class=p>&gt;</span>å·®è¯„<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span><span class=ni>&amp;nbsp;</span><span class=p>&lt;</span><span class=nt>strong</span><span class=p>&gt;</span>{{ teacher.bad_count }}<span class=p>&lt;/</span><span class=nt>strong</span><span class=p>&gt;</span>)
                <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
            <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
        {% endfor %}
        <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;/&#34;</span><span class=p>&gt;</span>è¿”å›é¦–é¡µ<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></td></tr></table></div></div></div></li><li><p>ä¿®æ”¹<code>vote/urls.py</code>æ–‡ä»¶ï¼Œå®ç°æ˜ å°„URLã€‚</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Python data-lang=Python><span class=kn>from</span> <span class=nn>django.contrib</span> <span class=kn>import</span> <span class=n>admin</span>
<span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>path</span>

<span class=kn>from</span> <span class=nn>polls.views</span> <span class=kn>import</span> <span class=n>show_subjects</span><span class=p>,</span> <span class=n>show_teachers</span>

<span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;admin/&#39;</span><span class=p>,</span> <span class=n>admin</span><span class=o>.</span><span class=n>site</span><span class=o>.</span><span class=n>urls</span><span class=p>),</span>
    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>show_subjects</span><span class=p>),</span>
    <span class=n>path</span><span class=p>(</span><span class=s1>&#39;teachers/&#39;</span><span class=p>,</span> <span class=n>show_teachers</span><span class=p>),</span>
<span class=p>]</span>
</code></pre></td></tr></table></div></div></div></li></ol><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œé¡µé¢ä¸Šéœ€è¦çš„å›¾ç‰‡ï¼ˆé™æ€èµ„æºï¼‰è¿˜æ²¡æœ‰èƒ½å¤Ÿæ­£å¸¸å±•ç¤ºï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€ç« èŠ‚ä¸­ä¸ºå¤§å®¶ä»‹ç»å¦‚ä½•å¤„ç†æ¨¡æ¿é¡µä¸Šçš„éœ€è¦çš„é™æ€èµ„æºã€‚</p><h3 id=è¡¥å……å†…å®¹><a href=#è¡¥å……å†…å®¹ class=anchor-link>#</a>è¡¥å……å†…å®¹</h3><h4 id=djangoæ¨¡å‹æœ€ä½³å®è·µ><a href=#djangoæ¨¡å‹æœ€ä½³å®è·µ class=anchor-link>#</a>Djangoæ¨¡å‹æœ€ä½³å®è·µ</h4><ol><li>æ­£ç¡®çš„ä¸ºæ¨¡å‹å’Œå…³ç³»å­—æ®µå‘½åã€‚</li><li>è®¾ç½®é€‚å½“çš„<code>related_name</code>å±æ€§ã€‚</li><li>ç”¨<code>OneToOneField</code>ä»£æ›¿<code>ForeignKeyField(unique=True)</code>ã€‚</li><li>é€šè¿‡â€œè¿ç§»æ“ä½œâ€ï¼ˆmigrateï¼‰æ¥æ·»åŠ æ¨¡å‹ã€‚</li><li>ç”¨NoSQLæ¥åº”å¯¹éœ€è¦é™ä½èŒƒå¼çº§åˆ«çš„åœºæ™¯ã€‚</li><li>å¦‚æœå¸ƒå°”ç±»å‹å¯ä»¥ä¸ºç©ºè¦ä½¿ç”¨<code>NullBooleanField</code>ã€‚</li><li>åœ¨æ¨¡å‹ä¸­æ”¾ç½®ä¸šåŠ¡é€»è¾‘ã€‚</li><li>ç”¨<code>&lt;ModelName>.DoesNotExists</code>å–ä»£<code>ObjectDoesNotExists</code>ã€‚</li><li>åœ¨æ•°æ®åº“ä¸­ä¸è¦å‡ºç°æ— æ•ˆæ•°æ®ã€‚</li><li>ä¸è¦å¯¹<code>QuerySet</code>è°ƒç”¨<code>len()</code>å‡½æ•°ã€‚</li><li>å°†<code>QuerySet</code>çš„<code>exists()</code>æ–¹æ³•çš„è¿”å›å€¼ç”¨äº<code>if</code>æ¡ä»¶ã€‚</li><li>ç”¨<code>DecimalField</code>æ¥å­˜å‚¨è´§å¸ç›¸å…³æ•°æ®è€Œä¸æ˜¯<code>FloatField</code>ã€‚</li><li>å®šä¹‰<code>__str__</code>æ–¹æ³•ã€‚</li><li>ä¸è¦å°†æ•°æ®æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ã€‚</li></ol><blockquote><p><strong>è¯´æ˜</strong>ï¼šä»¥ä¸Šå†…å®¹æ¥è‡ªäºSTEELKIWIç½‘ç«™çš„<a href=https://steelkiwi.com/blog/best-practices-working-django-models-python/ target=_blank rel=noopener><em>Best Practice working with Django models in Python</em></a>ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥é˜…è¯»åŸæ–‡ã€‚</p></blockquote><h4 id=æ¨¡å‹å®šä¹‰å‚è€ƒ><a href=#æ¨¡å‹å®šä¹‰å‚è€ƒ class=anchor-link>#</a>æ¨¡å‹å®šä¹‰å‚è€ƒ</h4><h5 id=å­—æ®µ><a href=#å­—æ®µ class=anchor-link>#</a>å­—æ®µ</h5><p>å¯¹å­—æ®µåç§°çš„é™åˆ¶</p><ul><li>å­—æ®µåä¸èƒ½æ˜¯Pythonçš„ä¿ç•™å­—ï¼Œå¦åˆ™ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯</li><li>å­—æ®µåä¸èƒ½æœ‰å¤šä¸ªè¿ç»­ä¸‹åˆ’çº¿ï¼Œå¦åˆ™å½±å“ORMæŸ¥è¯¢æ“ä½œ</li></ul><p>Djangoæ¨¡å‹å­—æ®µç±»</p><div class=table-container><table><thead><tr><th>å­—æ®µç±»</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>AutoField</code></td><td>è‡ªå¢IDå­—æ®µ</td></tr><tr><td><code>BigIntegerField</code></td><td>64ä½æœ‰ç¬¦å·æ•´æ•°</td></tr><tr><td><code>BinaryField</code></td><td>å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®çš„å­—æ®µï¼Œå¯¹åº”Pythonçš„<code>bytes</code>ç±»å‹</td></tr><tr><td><code>BooleanField</code></td><td>å­˜å‚¨<code>True</code>æˆ–<code>False</code></td></tr><tr><td><code>CharField</code></td><td>é•¿åº¦è¾ƒå°çš„å­—ç¬¦ä¸²</td></tr><tr><td><code>DateField</code></td><td>å­˜å‚¨æ—¥æœŸï¼Œæœ‰<code>auto_now</code>å’Œ<code>auto_now_add</code>å±æ€§</td></tr><tr><td><code>DateTimeField</code></td><td>å­˜å‚¨æ—¥æœŸå’Œæ—¥æœŸï¼Œä¸¤ä¸ªé™„åŠ å±æ€§åŒä¸Š</td></tr><tr><td><code>DecimalField</code></td><td>å­˜å‚¨å›ºå®šç²¾åº¦å°æ•°ï¼Œæœ‰<code>max_digits</code>ï¼ˆæœ‰æ•ˆä½æ•°ï¼‰å’Œ<code>decimal_places</code>ï¼ˆå°æ•°ç‚¹åé¢ï¼‰ä¸¤ä¸ªå¿…è¦çš„å‚æ•°</td></tr><tr><td><code>DurationField</code></td><td>å­˜å‚¨æ—¶é—´è·¨åº¦</td></tr><tr><td><code>EmailField</code></td><td>ä¸<code>CharField</code>ç›¸åŒï¼Œå¯ä»¥ç”¨<code>EmailValidator</code>éªŒè¯</td></tr><tr><td><code>FileField</code></td><td>æ–‡ä»¶ä¸Šä¼ å­—æ®µ</td></tr><tr><td><code>FloatField</code></td><td>å­˜å‚¨æµ®ç‚¹æ•°</td></tr><tr><td><code>ImageField</code></td><td>å…¶ä»–åŒ<code>FileFiled</code>ï¼Œè¦éªŒè¯ä¸Šä¼ çš„æ˜¯ä¸æ˜¯æœ‰æ•ˆå›¾åƒ</td></tr><tr><td><code>IntegerField</code></td><td>å­˜å‚¨32ä½æœ‰ç¬¦å·æ•´æ•°ã€‚</td></tr><tr><td><code>GenericIPAddressField</code></td><td>å­˜å‚¨IPv4æˆ–IPv6åœ°å€</td></tr><tr><td><code>NullBooleanField</code></td><td>å­˜å‚¨<code>True</code>ã€<code>False</code>æˆ–<code>null</code>å€¼</td></tr><tr><td><code>PositiveIntegerField</code></td><td>å­˜å‚¨æ— ç¬¦å·æ•´æ•°ï¼ˆåªèƒ½å­˜å‚¨æ­£æ•°ï¼‰</td></tr><tr><td><code>SlugField</code></td><td>å­˜å‚¨slugï¼ˆç®€çŸ­æ ‡æ³¨ï¼‰</td></tr><tr><td><code>SmallIntegerField</code></td><td>å­˜å‚¨16ä½æœ‰ç¬¦å·æ•´æ•°</td></tr><tr><td><code>TextField</code></td><td>å­˜å‚¨æ•°æ®é‡è¾ƒå¤§çš„æ–‡æœ¬</td></tr><tr><td><code>TimeField</code></td><td>å­˜å‚¨æ—¶é—´</td></tr><tr><td><code>URLField</code></td><td>å­˜å‚¨URLçš„<code>CharField</code></td></tr><tr><td><code>UUIDField</code></td><td>å­˜å‚¨å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦</td></tr></tbody></table></div><h5 id=å­—æ®µå±æ€§><a href=#å­—æ®µå±æ€§ class=anchor-link>#</a>å­—æ®µå±æ€§</h5><p>é€šç”¨å­—æ®µå±æ€§</p><div class=table-container><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>null</code></td><td>æ•°æ®åº“ä¸­å¯¹åº”çš„å­—æ®µæ˜¯å¦å…è®¸ä¸º<code>NULL</code>ï¼Œé»˜è®¤ä¸º<code>False</code></td></tr><tr><td><code>blank</code></td><td>åå°æ¨¡å‹ç®¡ç†éªŒè¯æ•°æ®æ—¶ï¼Œæ˜¯å¦å…è®¸ä¸º<code>NULL</code>ï¼Œé»˜è®¤ä¸º<code>False</code></td></tr><tr><td><code>choices</code></td><td>è®¾å®šå­—æ®µçš„é€‰é¡¹ï¼Œå„å…ƒç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯è®¾ç½®åœ¨æ¨¡å‹ä¸Šçš„å€¼ï¼Œç¬¬äºŒå€¼æ˜¯äººç±»å¯è¯»çš„å€¼</td></tr><tr><td><code>db_column</code></td><td>å­—æ®µå¯¹åº”åˆ°æ•°æ®åº“è¡¨ä¸­çš„åˆ—åï¼ŒæœªæŒ‡å®šæ—¶ç›´æ¥ä½¿ç”¨å­—æ®µçš„åç§°</td></tr><tr><td><code>db_index</code></td><td>è®¾ç½®ä¸º<code>True</code>æ—¶å°†åœ¨è¯¥å­—æ®µåˆ›å»ºç´¢å¼•</td></tr><tr><td><code>db_tablespace</code></td><td>ä¸ºæœ‰ç´¢å¼•çš„å­—æ®µè®¾ç½®ä½¿ç”¨çš„è¡¨ç©ºé—´ï¼Œé»˜è®¤ä¸º<code>DEFAULT_INDEX_TABLESPACE</code></td></tr><tr><td><code>default</code></td><td>å­—æ®µçš„é»˜è®¤å€¼</td></tr><tr><td><code>editable</code></td><td>å­—æ®µåœ¨åå°æ¨¡å‹ç®¡ç†æˆ–<code>ModelForm</code>ä¸­æ˜¯å¦æ˜¾ç¤ºï¼Œé»˜è®¤ä¸º<code>True</code></td></tr><tr><td><code>error_messages</code></td><td>è®¾å®šå­—æ®µæŠ›å‡ºå¼‚å¸¸æ—¶çš„é»˜è®¤æ¶ˆæ¯çš„å­—å…¸ï¼Œå…¶ä¸­çš„é”®åŒ…æ‹¬<code>null</code>ã€<code>blank</code>ã€<code>invalid</code>ã€<code>invalid_choice</code>ã€<code>unique</code>å’Œ<code>unique_for_date</code></td></tr><tr><td><code>help_text</code></td><td>è¡¨å•å°ç»„ä»¶æ—è¾¹æ˜¾ç¤ºçš„é¢å¤–çš„å¸®åŠ©æ–‡æœ¬ã€‚</td></tr><tr><td><code>primary_key</code></td><td>å°†å­—æ®µæŒ‡å®šä¸ºæ¨¡å‹çš„ä¸»é”®ï¼ŒæœªæŒ‡å®šæ—¶ä¼šè‡ªåŠ¨æ·»åŠ <code>AutoField</code>ç”¨äºä¸»é”®ï¼Œåªè¯»ã€‚</td></tr><tr><td><code>unique</code></td><td>è®¾ç½®ä¸º<code>True</code>æ—¶ï¼Œè¡¨ä¸­å­—æ®µçš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„</td></tr><tr><td><code>verbose_name</code></td><td>å­—æ®µåœ¨åå°æ¨¡å‹ç®¡ç†æ˜¾ç¤ºçš„åç§°ï¼ŒæœªæŒ‡å®šæ—¶ä½¿ç”¨å­—æ®µçš„åç§°</td></tr></tbody></table></div><p><code>ForeignKey</code>å±æ€§</p><ol><li><code>limit_choices_to</code>ï¼šå€¼æ˜¯ä¸€ä¸ªQå¯¹è±¡æˆ–è¿”å›ä¸€ä¸ªQå¯¹è±¡ï¼Œç”¨äºé™åˆ¶åå°æ˜¾ç¤ºå“ªäº›å¯¹è±¡ã€‚</li><li><code>related_name</code>ï¼šç”¨äºè·å–å…³è”å¯¹è±¡çš„å…³è”ç®¡ç†å™¨å¯¹è±¡ï¼ˆåå‘æŸ¥è¯¢ï¼‰ï¼Œå¦‚æœä¸å…è®¸åå‘ï¼Œè¯¥å±æ€§åº”è¯¥è¢«è®¾ç½®ä¸º<code>'+'</code>ï¼Œæˆ–è€…ä»¥<code>'+'</code>ç»“å°¾ã€‚</li><li><code>to_field</code>ï¼šæŒ‡å®šå…³è”çš„å­—æ®µï¼Œé»˜è®¤å…³è”å¯¹è±¡çš„ä¸»é”®å­—æ®µã€‚</li><li><code>db_constraint</code>ï¼šæ˜¯å¦ä¸ºå¤–é”®åˆ›å»ºçº¦æŸï¼Œé»˜è®¤å€¼ä¸º<code>True</code>ã€‚</li><li><code>on_delete</code>ï¼šå¤–é”®å…³è”çš„å¯¹è±¡è¢«åˆ é™¤æ—¶å¯¹åº”çš„åŠ¨ä½œï¼Œå¯å–çš„å€¼åŒ…æ‹¬<code>django.db.models</code>ä¸­å®šä¹‰çš„ï¼š<ul><li><code>CASCADE</code>ï¼šçº§è”åˆ é™¤ã€‚</li><li><code>PROTECT</code>ï¼šæŠ›å‡º<code>ProtectedError</code>å¼‚å¸¸ï¼Œé˜»æ­¢åˆ é™¤å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li><code>SET_NULL</code>ï¼šæŠŠå¤–é”®è®¾ç½®ä¸º<code>null</code>ï¼Œå½“<code>null</code>å±æ€§è¢«è®¾ç½®ä¸º<code>True</code>æ—¶æ‰èƒ½è¿™ä¹ˆåšã€‚</li><li><code>SET_DEFAULT</code>ï¼šæŠŠå¤–é”®è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œæä¾›äº†é»˜è®¤å€¼æ‰èƒ½è¿™ä¹ˆåšã€‚</li></ul></li></ol><p><code>ManyToManyField</code>å±æ€§</p><ol><li><code>symmetrical</code>ï¼šæ˜¯å¦å»ºç«‹å¯¹ç§°çš„å¤šå¯¹å¤šå…³ç³»ã€‚</li><li><code>through</code>ï¼šæŒ‡å®šç»´æŒå¤šå¯¹å¤šå…³ç³»çš„ä¸­é—´è¡¨çš„Djangoæ¨¡å‹ã€‚</li><li><code>throughfields</code>ï¼šå®šä¹‰äº†ä¸­é—´æ¨¡å‹æ—¶å¯ä»¥æŒ‡å®šå»ºç«‹å¤šå¯¹å¤šå…³ç³»çš„å­—æ®µã€‚</li><li><code>db_table</code>ï¼šæŒ‡å®šç»´æŒå¤šå¯¹å¤šå…³ç³»çš„ä¸­é—´è¡¨çš„è¡¨åã€‚</li></ol><h5 id=æ¨¡å‹å…ƒæ•°æ®é€‰é¡¹><a href=#æ¨¡å‹å…ƒæ•°æ®é€‰é¡¹ class=anchor-link>#</a>æ¨¡å‹å…ƒæ•°æ®é€‰é¡¹</h5><div class=table-container><table><thead><tr><th>é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>abstract</code></td><td>è®¾ç½®ä¸ºTrueæ—¶æ¨¡å‹æ˜¯æŠ½è±¡çˆ¶ç±»</td></tr><tr><td><code>app_label</code></td><td>å¦‚æœå®šä¹‰æ¨¡å‹çš„åº”ç”¨ä¸åœ¨INSTALLED_APPSä¸­å¯ä»¥ç”¨è¯¥å±æ€§æŒ‡å®š</td></tr><tr><td><code>db_table</code></td><td>æ¨¡å‹ä½¿ç”¨çš„æ•°æ®è¡¨åç§°</td></tr><tr><td><code>db_tablespace</code></td><td>æ¨¡å‹ä½¿ç”¨çš„æ•°æ®è¡¨ç©ºé—´</td></tr><tr><td><code>default_related_name</code></td><td>å…³è”å¯¹è±¡å›æŒ‡è¿™ä¸ªæ¨¡å‹æ—¶é»˜è®¤ä½¿ç”¨çš„åç§°ï¼Œé»˜è®¤ä¸º&lt;model_name>_set</td></tr><tr><td><code>get_latest_by</code></td><td>æ¨¡å‹ä¸­å¯æ’åºå­—æ®µçš„åç§°ã€‚</td></tr><tr><td><code>managed</code></td><td>è®¾ç½®ä¸ºTrueæ—¶ï¼ŒDjangoåœ¨è¿ç§»ä¸­åˆ›å»ºæ•°æ®è¡¨å¹¶åœ¨æ‰§è¡Œflushç®¡ç†å‘½ä»¤æ—¶æŠŠè¡¨ç§»é™¤</td></tr><tr><td><code>order_with_respect_to</code></td><td>æ ‡è®°å¯¹è±¡ä¸ºå¯æ’åºçš„</td></tr><tr><td><code>ordering</code></td><td>å¯¹è±¡çš„é»˜è®¤æ’åº</td></tr><tr><td><code>permissions</code></td><td>åˆ›å»ºå¯¹è±¡æ—¶å†™å…¥æƒé™è¡¨çš„é¢å¤–æƒé™</td></tr><tr><td><code>default_permissions</code></td><td>é»˜è®¤ä¸º<code>('add', 'change', 'delete')</code></td></tr><tr><td><code>unique_together</code></td><td>è®¾å®šç»„åˆåœ¨ä¸€èµ·æ—¶å¿…é¡»ç‹¬ä¸€æ— äºŒçš„å­—æ®µå</td></tr><tr><td><code>index_together</code></td><td>è®¾å®šä¸€èµ·å»ºç«‹ç´¢å¼•çš„å¤šä¸ªå­—æ®µå</td></tr><tr><td><code>verbose_name</code></td><td>ä¸ºå¯¹è±¡è®¾å®šäººç±»å¯è¯»çš„åç§°</td></tr><tr><td><code>verbose_name_plural</code></td><td>è®¾å®šå¯¹è±¡çš„å¤æ•°åç§°</td></tr></tbody></table></div><h4 id=æŸ¥è¯¢å‚è€ƒ><a href=#æŸ¥è¯¢å‚è€ƒ class=anchor-link>#</a>æŸ¥è¯¢å‚è€ƒ</h4><h5 id=æŒ‰å­—æ®µæŸ¥æ‰¾å¯ä»¥ç”¨çš„æ¡ä»¶><a href=#æŒ‰å­—æ®µæŸ¥æ‰¾å¯ä»¥ç”¨çš„æ¡ä»¶ class=anchor-link>#</a>æŒ‰å­—æ®µæŸ¥æ‰¾å¯ä»¥ç”¨çš„æ¡ä»¶</h5><ol><li><code>exact</code> / <code>iexact</code>ï¼šç²¾ç¡®åŒ¹é…/å¿½ç•¥å¤§å°å†™çš„ç²¾ç¡®åŒ¹é…æŸ¥è¯¢</li><li><code>contains</code> / <code>icontains</code> / <code>startswith</code> / <code>istartswith</code> / <code>endswith</code> / <code>iendswith</code>ï¼šåŸºäº<code>like</code>çš„æ¨¡ç³ŠæŸ¥è¯¢</li><li><code>in</code> ï¼šé›†åˆè¿ç®—</li><li><code>gt</code> / <code>gte</code> / <code>lt</code> / <code>lte</code>ï¼šå¤§äº/å¤§äºç­‰äº/å°äº/å°äºç­‰äºå…³ç³»è¿ç®—</li><li><code>range</code>ï¼šæŒ‡å®šèŒƒå›´æŸ¥è¯¢ï¼ˆSQLä¸­çš„<code>betweenâ€¦andâ€¦</code>ï¼‰</li><li><code>year</code> / <code>month</code> / <code>day</code> / <code>week_day</code> / <code>hour</code> / <code>minute</code> / <code>second</code>ï¼šæŸ¥è¯¢æ—¶é—´æ—¥æœŸ</li><li><code>isnull</code>ï¼šæŸ¥è¯¢ç©ºå€¼ï¼ˆTrueï¼‰æˆ–éç©ºå€¼ï¼ˆFalseï¼‰</li><li><code>search</code>ï¼šåŸºäºå…¨æ–‡ç´¢å¼•çš„å…¨æ–‡æ£€ç´¢ï¼ˆä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨ï¼‰</li><li><code>regex</code> / <code>iregex</code>ï¼šåŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢</li></ol></div><ul class=post-copyright><li class="copyright-item author"><span class=copyright-item-text>ä½œè€…</span>ï¼š<span class="p-author h-card">éª†æ˜Š</span></li><li class="copyright-item link"><span class=copyright-item-text>é“¾æ¥</span>ï¼š<a href=https://github.com/jackfrued/Python-100-Days target=_blank rel=noopener>https://github.com/jackfrued/Python-100-Days</a></li><li class="copyright-item license"><span class=copyright-item-text>è®¸å¯</span>ï¼šæœ¬æ–‡é‡‡ç”¨<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener>ã€ŒCC BY-NC-SA 4.0ã€</a>åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</li></ul></article><div class=related-posts><h2 class=related-title>ç›¸å…³æ–‡ç« ï¼š<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6.0-12-5.4-12-12v-92h-92c-6.6.0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6.0 12 5.4 12 12v92h92c6.6.0 12 5.4 12 12v56z"/></svg></h2><ul class=related-list><li class=related-item><a href=/python/01.%E5%88%9D%E8%AF%86python/ class=related-link>01.åˆè¯†Python</a></li><li class=related-item><a href=/python/02.%E8%AF%AD%E8%A8%80%E5%85%83%E7%B4%A0/ class=related-link>02.è¯­è¨€å…ƒç´ </a></li><li class=related-item><a href=/python/03.%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84/ class=related-link>03.åˆ†æ”¯ç»“æ„</a></li><li class=related-item><a href=/python/04.%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84/ class=related-link>04.å¾ªç¯ç»“æ„</a></li><li class=related-item><a href=/python/05.%E6%9E%84%E9%80%A0%E7%A8%8B%E5%BA%8F%E9%80%BB%E8%BE%91/ class=related-link>05.æ„é€ ç¨‹åºé€»è¾‘</a></li></ul></div><div class=post-tags><a href=/tags/python/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>python</a></div></div></main><div id=back-to-top class=back-to-top><a href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>Â©&nbsp;2021â€“2022&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;hanxin</div><script src=https://sdk.jinrishici.com/v2/browser/jinrishici.js></script>
<text class=poem_sentence></text>
<text class=poem_info></text>
<script type=text/javascript>jinrishici.load(function(a){var b=document.querySelector(".poem_sentence"),c=document.querySelector(".poem_info");b.innerHTML=a.data.content,c.innerHTML='â€”â€”'+a.data.origin.author})</script></div></footer></div><script src=https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js></script>
<script>mediumZoom(document.querySelectorAll('div.post-body img'),{background:'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'})</script><script src=https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js type=module defer></script></body></html>